<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<div>
    <p>标量速度</p>
    <label>vx<input value="1" id="inputVx"></label>
    <label>vy<input value="0" id="inputVy"></label>
</div>
<div>
    <p>矢量速度</p>
    <label>v<input value="0" id="inputV"></label>
    <label>rad<input value="0" id="inputRad"></label>
</div>
<script>
    var input = {
        vx: document.getElementById('inputVx'),
        vy: document.getElementById('inputVy'),
        v: document.getElementById('inputV'),
        rad: document.getElementById('inputRad')
    }

    var velocity = {
        vx: 1,
        vy: 0,
        v: 0,
        rad: 0
    }

    function updateVxVy(v, rad) {
        input.vx.value = velocity.vx = v * Math.cos(rad)
        input.vy.value = velocity.vy = v * Math.sin(rad)
    }
    function updateVRad (vx, vy) {
        velocity.rad = Math.atan2(vy, vx)
        input.rad.value = velocity.rad * 180 / Math.PI
        input.v.value = velocity.v = Math.sqrt(vx * vx + vy * vy)
    }

    function onInputChange (e) {
        var el = e.currentTarget
        var name = el.name
        console.log('change name', name)
        velocity[name] = +el.value
        if(el == input.vx || el == input.vy) {
            updateVRad(velocity.vx, velocity.vy)
        } else {
            updateVxVy(velocity.v, velocity.rad * Math.PI / 180)
        }
    }

    for(var key in input) {
        input[key].name = key
        input[key].addEventListener('input', onInputChange)
    }

    updateVRad(velocity.vx, velocity.vy)
</script>
</body>
</html>